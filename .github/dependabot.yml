# GitHub Dependabot設定
# 依存関係の自動更新とセキュリティアップデート

version: 2
updates:
  # Python依存関係の管理
  - package-ecosystem: "pip"
    directory: "/"
    schedule:
      interval: "weekly"
      day: "monday"
      time: "09:00"
      timezone: "Asia/Tokyo"
    
    # プルリクエスト設定
    open-pull-requests-limit: 5
    
    # コミットメッセージのカスタマイズ
    commit-message:
      prefix: "🔄 deps"
      prefix-development: "🔧 dev-deps"
      include: "scope"
    
    # レビュワー設定（適宜変更）
    reviewers:
      - "jdssjp"
    
    # ラベル設定
    labels:
      - "dependencies"
      - "python"
    
    # 依存関係グルーピング
    groups:
      # 開発依存関係をまとめて更新
      development-dependencies:
        patterns:
          - "pytest*"
          - "coverage*"
          - "flake8*"
          - "black*"
          - "isort*"
          - "mypy*"
          - "bandit*"
          - "safety*"
      
      # PDF処理関連をまとめて更新  
      pdf-processing:
        patterns:
          - "PyMuPDF*"
          - "reportlab*"
          - "Pillow*"
      
      # ビルド関連をまとめて更新
      build-tools:
        patterns:
          - "pyinstaller*"
          - "setuptools*"
    
    # 無視する依存関係（必要に応じて）
    ignore:
      # 特定バージョンの固定が必要な場合
      - dependency-name: "PyMuPDF"
        versions: [">1.21.1"]  # 例：互換性問題がある場合
    
    # バージョン戦略
    versioning-strategy: increase
    
    # 脆弱性のあるアップデートのみ許可する場合
    # open-pull-requests-limit: 0
    # security-updates-only: true

  # GitHub Actions ワークフローの依存関係管理
  - package-ecosystem: "github-actions"
    directory: "/.github/workflows"
    schedule:
      interval: "weekly"
      day: "tuesday"
      time: "09:00" 
      timezone: "Asia/Tokyo"
    
    commit-message:
      prefix: "🔄 ci"
      include: "scope"
    
    labels:
      - "github-actions"
      - "ci"
    
    reviewers:
      - "jdssjp"